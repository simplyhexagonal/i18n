var I18N=(()=>{var x=Object.create;var l=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var m=t=>l(t,"__esModule",{value:!0});var j=(t,n)=>{m(t);for(var i in n)l(t,i,{get:n[i],enumerable:!0})},I=(t,n,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of R(n))!N.call(t,a)&&a!=="default"&&l(t,a,{get:()=>n[a],enumerable:!(i=P(n,a))||i.enumerable});return t},r=t=>I(m(l(t!=null?x(M(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var w={};j(w,{default:()=>c});var f=r(require("fs")),o=r(require("i18next")),y=r(require("@simplyhexagonal/multi-replace")),g=r(require("@simplyhexagonal/mono-context")),h=r(require("../package.json"));const e=class{constructor(n,i){this._logfn=(...n)=>console.log(`
	\u{1F7E1} `,...n,`
`);this._generateReplacer=n=>(i,a)=>n(a);this.t=null;this.matchers=[/__\(\s*['"`](.+?)['"`]\s*\)/g];this.replacer=(n,i)=>(e.instance._logfn("I18N WARNING: replacer called but is not ready! Did you forget to await initPromise?"),i);this.i18next=o.default;this.changeLanguage=o.default.changeLanguage.bind(o.default);this.plugins={esbuild:{name:"i18n",setup(n){[[/\.tsx$/,"tsx"],[/\.ts$/,"ts"],[/\.jsx$/,"jsx"],[/\.js$/,"js"]].forEach(([a,s])=>{n.onLoad({filter:a},async p=>{await e.instance.initPromise;const u=f.default.readFileSync(p.path,"utf8");return{contents:e.instance.apply(u),loader:s}})})}},vite:{name:"i18n",transform:async n=>(await e.instance.initPromise,{code:e.instance.apply(n),map:null}),transformIndexHtml:async n=>(await e.instance.initPromise,e.instance.apply(n))}};this.apply=n=>{const i=this.matchers.map(a=>[a,this.replacer]);return(0,y.multiReplaceSync)(n,i)};if(g.default.count("I18N")>1)return e.instance._logfn("I18N WARNING: already initialized! Returning existing instance..."),e.instance;this.initPromise=o.default.use({type:"postProcessor",name:"warnMissingTranslation",process:(s,p,u,d)=>([s].flat().join("")===[p].flat().join("")&&e.stringifyAndAlert(s),s)}).init({...n,postProcess:["warnMissingTranslation",...n.postProcess||[]]}).then(s=>(this.t=s,this.replacer=this._generateReplacer(s),s)),typeof(g.default.getStateValue("logger")||{}).warn=="function"&&(this._logfn=(...s)=>g.default.getStateValue("logger").warn(...s)),i&&(this.matchers=i),e.instance=this}};let c=e;c.version=h.version,c.stringifyAndAlert=n=>{const{language:i}=e.instance.i18next;return e.instance._logfn(`I18N WARNING: Missing "${i}" translation for: ${n}`),JSON.stringify(n)};return w;})();
'undefined'!=typeof module&&(module.exports=I18N.default),'undefined'!=typeof window&&(I18N=I18N.default);